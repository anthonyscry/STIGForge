<Window x:Class="STIGForge.App.OverlayEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Overlay Editor" Height="480" Width="720" WindowStartupLocation="CenterOwner"
        Background="{DynamicResource WindowBackgroundBrush}" Foreground="{DynamicResource TextPrimaryBrush}">
  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
      <TextBlock Text="Overlay Name:" VerticalAlignment="Center"/>
      <TextBox Width="260" Margin="6,0,0,0" Text="{Binding OverlayName}"
               ToolTipService.ToolTip="A short name for this overlay. Use something descriptive like 'My Site Exceptions'."/>
    </StackPanel>

    <StackPanel Grid.Row="1">
      <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
        <TextBlock Text="RuleId:" Width="80" VerticalAlignment="Center"/>
        <TextBox Width="200" Text="{Binding PowerStigRuleId}"
                 ToolTipService.ToolTip="The STIG rule identifier you want to override (e.g., V-254239.a)."/>
        <TextBlock Text="Setting:" Width="70" Margin="10,0,0,0" VerticalAlignment="Center"/>
        <TextBox Width="200" Text="{Binding PowerStigSettingName}"
                 ToolTipService.ToolTip="The PowerSTIG setting name for this rule (e.g., MinimumPasswordLength)."/>
        <TextBlock Text="Value:" Width="60" Margin="10,0,0,0" VerticalAlignment="Center"/>
        <TextBox Width="120" Text="{Binding PowerStigValue}"
                 ToolTipService.ToolTip="The value you want to set instead of the STIG default (e.g., 14)."/>
        <Button Content="Add" MinWidth="60" Height="28" Padding="14,0" Margin="8,0,0,0" Command="{Binding AddPowerStigOverrideCommand}"
                ToolTipService.ToolTip="Add this rule override to the overlay list below."/>
      </StackPanel>

      <ListView ItemsSource="{Binding PowerStigOverrides}" Height="260">
        <ListView.View>
          <GridView>
            <GridViewColumn Header="RuleId" DisplayMemberBinding="{Binding RuleId}" Width="160"/>
            <GridViewColumn Header="Setting" DisplayMemberBinding="{Binding SettingName}" Width="220"/>
            <GridViewColumn Header="Value" DisplayMemberBinding="{Binding Value}" Width="220"/>
          </GridView>
        </ListView.View>
      </ListView>

      <WrapPanel Margin="0,8,0,0">
        <Button Content="Import CSV" MinWidth="120" Height="30" Padding="14,0" Margin="0,0,10,0" Command="{Binding ImportPowerStigCsvCommand}"
                ToolTipService.ToolTip="Load overrides from a CSV file with RuleId, SettingName, and Value columns."/>
        <Button Content="Save Overlay" MinWidth="120" Height="30" Padding="14,0" Margin="0,0,10,0" Command="{Binding SaveOverlayCommand}"
                ToolTipService.ToolTip="Save this overlay to disk. It will appear in the Profile tab's overlay list."/>
        <TextBlock Text="{Binding OverlayStatus}" Margin="0,8,0,0" Foreground="{DynamicResource TextMutedBrush}"/>
      </WrapPanel>
    </StackPanel>
  </Grid>
</Window>
